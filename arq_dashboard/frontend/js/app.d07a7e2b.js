(function(){"use strict";var e={2524:function(e,a,t){t(1129),t(8594),t(6133);var s=t(9242),n=t(3396);const r={class:"section is-medium"},o={class:"container"};function i(e,a,t,s,i,l){const u=(0,n.up)("Navbar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u),(0,n._)("section",r,[(0,n._)("div",o,[(0,n.Wm)(c)])])],64)}const l=e=>((0,n.dD)("data-v-fea818de"),e=e(),(0,n.Cn)(),e),u={role:"navigation","aria-label":"main navigation",class:"navbar is-fixed-top"},c=l((()=>(0,n._)("div",{class:"navbar-brand"},[(0,n._)("a",{class:"navbar-item"},[(0,n._)("h1",{class:"title"},"ARQ Dashboard")])],-1))),d={class:"navbar-menu"},p=l((()=>(0,n._)("div",{class:"navbar-start"},null,-1))),g={class:"navbar-end"},m=(0,n.Uk)("Stats"),v=(0,n.Uk)("Jobs"),b=(0,n.Uk)("Setting"),_=l((()=>(0,n._)("a",{class:"navbar-item"},[(0,n._)("a",{href:"/redoc",target:"_blank",class:"navbar-item"},"API")],-1))),f=l((()=>(0,n._)("a",{class:"navbar-item"},[(0,n._)("a",{href:"https://github.com/ninoseki/arq-dashboard",target:"_blank",class:"navbar-item"},"GitHub")],-1)));function w(e,a,t,s,r,o){const i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",u,[c,(0,n._)("div",d,[p,(0,n._)("div",g,[(0,n.Wm)(i,{class:"navbar-item",to:{name:"stats"}},{default:(0,n.w5)((()=>[m])),_:1}),(0,n.Wm)(i,{class:"navbar-item",to:{name:"jobs"}},{default:(0,n.w5)((()=>[v])),_:1}),(0,n.Wm)(i,{class:"navbar-item",to:{name:"setting"}},{default:(0,n.w5)((()=>[b])),_:1}),_,f])])])}var y=(0,n.aZ)({name:"NavbarItem"}),k=t(89);const h=(0,k.Z)(y,[["render",w],["__scopeId","data-v-fea818de"]]);var P=h,j=(0,n.aZ)({name:"App",components:{Navbar:P}});const q=(0,k.Z)(j,[["render",i]]);var S=q,D=t(302);function N(e,a,t,s,r,o){const i=(0,n.up)("Jobs");return(0,n.wg)(),(0,n.j4)(i)}var Z=t(6367);const T={class:"box mb-6"},J=(0,n._)("hr",null,null,-1),z={class:"columns"},I={class:"column"},H={class:"field is-grouped is-grouped-centered"},F={class:"control"},W=(0,n._)("span",{class:"icon is-small"},[(0,n._)("i",{class:"fas fa-search"})],-1),U=(0,n._)("span",null,"Search",-1),x=[W,U],C={key:0},O=(0,n._)("hr",null,null,-1);function V(e,a,t,s,r,o){const i=(0,n.up)("Form"),l=(0,n.up)("Loading"),u=(0,n.up)("ErrorMessage"),c=(0,n.up)("Jobs");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",T,[(0,n.Wm)(i,{ref:"form",page:e.page},null,8,["page"]),J,(0,n._)("div",z,[(0,n._)("div",I,[(0,n._)("div",H,[(0,n._)("p",F,[(0,n._)("a",{class:"button is-light",onClick:a[0]||(a[0]=(...a)=>e.search&&e.search(...a))},x)])])])])]),e.getJobsTask.performCount>0?((0,n.wg)(),(0,n.iD)("div",C,[O,e.getJobsTask.isRunning?((0,n.wg)(),(0,n.j4)(l,{key:0})):(0,n.kq)("",!0),e.getJobsTask.isError?((0,n.wg)(),(0,n.j4)(u,{key:1,error:e.getJobsTask.last?.error},null,8,["error"])):(0,n.kq)("",!0),e.getJobsTask.last?.value?((0,n.wg)(),(0,n.j4)(c,{key:2,jobs:e.getJobsTask.last.value,onRefreshPage:e.refreshPage,onUpdatePage:e.updatePage},null,8,["jobs","onRefreshPage","onUpdatePage"])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)],64)}var Q=t(4870),R=t(8228),Y=t(6265),M=t.n(Y),A=t(3365);const K=(0,A.r8)((()=>(0,Z._aR)("arq-dashboard-locale-storage",{queue:"arq:queue"}))),L=K();let E=M().create({headers:{accept:"application/json","arq-queue-name":L.value.queue}});function G(){E=M().create({headers:{accept:"application/json","arq-queue-name":L.value.queue}})}const B={async getStats(){const e=await E.get("/api/stats/");return e.data},async getJob(e){const a=await E.get(`/api/jobs/${e}`);return a.data},async getJobs(e){const a=await E.get("/api/jobs/",{params:e});return a.data},async getFunctionNames(){const e=await E.get("/api/functions/");return e.data},async getQueueNames(){const e=await E.get("/api/queues/");return e.data}};var $=t(7139);const X=e=>((0,n.dD)("data-v-c33886b2"),e=e(),(0,n.Cn)(),e),ee=X((()=>(0,n._)("div",{class:"notification is-danger is-light"},[(0,n._)("p",null,"Something went wrong...")],-1))),ae={key:0,class:"wrapper"},te={key:1};function se(e,a,t,s,r,o){const i=(0,n.up)("VueJsonPretty");return(0,n.wg)(),(0,n.iD)(n.HY,null,[ee,e.error.response.data?((0,n.wg)(),(0,n.iD)("div",ae,[(0,n.Wm)(i,{data:e.error.response.data},null,8,["data"])])):((0,n.wg)(),(0,n.iD)("p",te,(0,$.zw)(e.error),1))],64)}var ne=t(5316),re=t.n(ne),oe=(0,n.aZ)({name:"ErrorMessageItem",components:{VueJsonPretty:re()},props:{error:{type:Object,required:!0}}});const ie=(0,k.Z)(oe,[["render",se],["__scopeId","data-v-c33886b2"]]);var le=ie;function ue(e,a,t,s,r,o){const i=(0,n.up)("Form");return(0,n.wg)(),(0,n.j4)(i,{ref:"form",page:e.page,functionNames:e.getFunctionNamesTask.last?.value||[],queueNames:e.getQueueNamesTask.last?.value||[]},null,8,["page","functionNames","queueNames"])}const ce={class:"columns"},de={class:"column"},pe={class:"field is-horizontal"},ge=(0,n._)("div",{class:"field-label is-normal"},[(0,n._)("label",{class:"label"},"Function")],-1),me={class:"field-body"},ve={class:"field"},be={class:"control"},_e={class:"select"},fe=(0,n._)("option",null,null,-1),we={class:"column"},ye={class:"field is-horizontal"},ke=(0,n._)("div",{class:"field-label is-normal"},[(0,n._)("label",{class:"label"},"Status")],-1),he={class:"field-body"},Pe={class:"field"},je={class:"control"},qe={class:"select"},Se=(0,n._)("option",null,null,-1),De={class:"columns"},Ne={class:"column"},Ze={class:"field is-horizontal"},Te=(0,n._)("div",{class:"field-label is-normal"},[(0,n._)("label",{class:"label"},"Start time")],-1),Je={class:"field-body"},ze={class:"field"},Ie={class:"control"},He={class:"column"},Fe={class:"field is-horizontal"},We=(0,n._)("div",{class:"field-label is-normal"},[(0,n._)("label",{class:"label"},"Finish time")],-1),Ue={class:"field-body"},xe={class:"field"},Ce={class:"control"},Oe={class:"columns"},Ve={class:"column"},Qe={class:"field is-horizontal"},Re=(0,n._)("div",{class:"field-label is-normal"},[(0,n._)("label",{class:"label"},"Success")],-1),Ye={class:"field-body"},Me={class:"field"},Ae={class:"control"},Ke={class:"radio"},Le=(0,n.Uk)(" True "),Ee={class:"radio"},Ge=(0,n.Uk)(" False "),Be={class:"radio"},$e=(0,n.Uk)(" Both "),Xe=(0,n._)("div",{class:"column"},null,-1);function ea(e,a,t,r,o,i){const l=(0,n.up)("Datepicker");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",ce,[(0,n._)("div",de,[(0,n._)("div",pe,[ge,(0,n._)("div",me,[(0,n._)("div",ve,[(0,n._)("div",be,[(0,n._)("div",_e,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.functionName=a)},[fe,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.functionNames,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.name},(0,$.zw)(e.name),1)))),128))],512),[[s.bM,e.functionName]])])])])])])]),(0,n._)("div",we,[(0,n._)("div",ye,[ke,(0,n._)("div",he,[(0,n._)("div",Pe,[(0,n._)("div",je,[(0,n._)("div",qe,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.status=a)},[Se,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.statuses,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e},(0,$.zw)(e),1)))),128))],512),[[s.bM,e.status]])])])])])])])]),(0,n._)("div",De,[(0,n._)("div",Ne,[(0,n._)("div",Ze,[Te,(0,n._)("div",Je,[(0,n._)("div",ze,[(0,n._)("p",Ie,[(0,n.Wm)(l,{modelValue:e.startTime,"onUpdate:modelValue":a[2]||(a[2]=a=>e.startTime=a)},null,8,["modelValue"])])])])])]),(0,n._)("div",He,[(0,n._)("div",Fe,[We,(0,n._)("div",Ue,[(0,n._)("div",xe,[(0,n._)("p",Ce,[(0,n.Wm)(l,{modelValue:e.finishTime,"onUpdate:modelValue":a[3]||(a[3]=a=>e.finishTime=a)},null,8,["modelValue"])])])])])])]),(0,n._)("div",Oe,[(0,n._)("div",Ve,[(0,n._)("div",Qe,[Re,(0,n._)("div",Ye,[(0,n._)("div",Me,[(0,n._)("div",Ae,[(0,n._)("label",Ke,[(0,n.wy)((0,n._)("input",{type:"radio","onUpdate:modelValue":a[4]||(a[4]=a=>e.success=a),value:!0},null,512),[[s.G2,e.success]]),Le]),(0,n._)("label",Ee,[(0,n.wy)((0,n._)("input",{type:"radio","onUpdate:modelValue":a[5]||(a[5]=a=>e.success=a),value:!1},null,512),[[s.G2,e.success]]),Ge]),(0,n._)("label",Be,[(0,n.wy)((0,n._)("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=a=>e.success=a),value:void 0},null,512),[[s.G2,e.success]]),$e])])])])])]),Xe])],64)}var aa=t(1897),ta=t(618),sa=(0,n.aZ)({name:"FormItem",props:{page:{type:Number,required:!0},functionNames:{type:Array,required:!0},queueNames:{type:Array,required:!0}},components:{Datepicker:ta.Z},setup(e){const a=(0,Q.iH)(void 0),t=(0,Q.iH)(void 0),s=(0,Q.iH)(void 0),r=(0,Q.iH)(void 0),o=(0,Q.iH)(void 0),i=(0,aa.K)("function"),l=(0,aa.K)("status"),u=["deferred","queued","in_progress","complete","not_found"],c=e=>{if(void 0!==e&&""!==e)return e},d=()=>{const n={page:e.page,success:a.value,status:c(o.value),startTime:c(t.value),finishTime:c(s.value),functionName:c(r.value)};return n},p=()=>{i.value&&(r.value=i.value.toString()),l.value&&(o.value=l.value.toString())};return(0,n.bv)((()=>{p()})),{getSearchParams:d,success:a,status:o,startTime:t,finishTime:s,functionName:r,statuses:u}}});const na=(0,k.Z)(sa,[["render",ea]]);var ra=na,oa=(0,n.aZ)({name:"FormWrapper",components:{Form:ra},props:{page:{type:Number,required:!0}},setup(){const e=(0,Q.iH)(),a=()=>e.value?.getSearchParams(),t=(0,R.KP)((async()=>await B.getFunctionNames())),s=(0,R.KP)((async()=>await B.getQueueNames()));return(0,n.bv)((async()=>{await t.perform(),await s.perform()})),{getFunctionNamesTask:t,getQueueNamesTask:s,getSearchParams:a,form:e}}});const ia=(0,k.Z)(oa,[["render",ue]]);var la=ia;const ua={key:0},ca=(0,n._)("article",{class:"message is-info"},[(0,n._)("div",{class:"message-body"},"There is no job to display")],-1),da=[ca],pa={key:1},ga={class:"table-container"},ma={class:"table is-bordered is-fullwidth"},va=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Job ID"),(0,n._)("th",null,"Queue"),(0,n._)("th",null,"Function"),(0,n._)("th",null,"Status"),(0,n._)("th",null,"Success"),(0,n._)("th",null,"Enqueued time"),(0,n._)("th",null,"Start time"),(0,n._)("th",null,"Finish time")])],-1);function ba(e,a,t,s,r,o){const i=(0,n.up)("router-link"),l=(0,n.up)("Status"),u=(0,n.up)("Success"),c=(0,n.up)("ReadableDatetime"),d=(0,n.up)("Pagination");return 0===e.jobs.jobs.length?((0,n.wg)(),(0,n.iD)("div",ua,da)):((0,n.wg)(),(0,n.iD)("div",pa,[(0,n._)("div",ga,[(0,n._)("table",ma,[va,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.jobs.jobs,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.jobId},[(0,n._)("td",null,[(0,n.Wm)(i,{to:{name:"job",params:{id:e.jobId}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.jobId),1)])),_:2},1032,["to"])]),(0,n._)("td",null,(0,$.zw)(e.queueName),1),(0,n._)("td",null,(0,$.zw)(e.function),1),(0,n._)("td",null,[(0,n.Wm)(l,{status:e.status},null,8,["status"])]),(0,n._)("td",null,[(0,n.Wm)(u,{success:e.success,status:e.status},null,8,["success","status"])]),(0,n._)("td",null,[(0,n.Wm)(c,{dt:e.enqueueTime||void 0},null,8,["dt"])]),(0,n._)("td",null,[(0,n.Wm)(c,{dt:e.startTime||void 0},null,8,["dt"])]),(0,n._)("td",null,[(0,n.Wm)(c,{dt:e.finishTime||void 0},null,8,["dt"])])])))),128))])])]),(0,n.Wm)(d,{total:e.jobs.total,currentPage:e.jobs.currentPage,pageSize:e.jobs.pageSize,onUpdatePage:e.updatePage},null,8,["total","currentPage","pageSize","onUpdatePage"]),(0,n._)("p",null,"("+(0,$.zw)(e.jobs.total)+" jobs in total)",1)]))}function _a(e,a,t,s,r,o){return(0,n.wg)(),(0,n.iD)("span",{class:(0,$.C_)(["tag is-medium",e.className])},(0,$.zw)(e.status),3)}var fa=(0,n.aZ)({name:"StatusItem",props:{status:{type:String,required:!0}},setup(e){const a=new Map([["deferred","is-info"],["queued",""],["in_progress","is-link"],["complete","is-success"],["not_found","is-warning"]]),t=(0,n.Fl)((()=>a.get(e.status)||""));return{className:t}}});const wa=(0,k.Z)(fa,[["render",_a]]);var ya=wa;function ka(e,a,t,s,r,o){return(0,n.wg)(),(0,n.iD)("span",{class:(0,$.C_)(["tag is-medium is-light",e.className])},(0,$.zw)(e.success),3)}var ha=(0,n.aZ)({name:"SuccessItem",props:{success:{type:Boolean,required:!0},status:{type:String,required:!0}},setup(e){const a=(0,n.Fl)((()=>"complete"===e.status?e.success?"is-success":"is-danger":""));return{className:a}}});const Pa=(0,k.Z)(ha,[["render",ka]]);var ja=Pa;const qa={class:"pagination",role:"navigation","aria-label":"pagination"},Sa={key:0,class:"pagination-list"},Da={key:1,class:"pagination-list"},Na={key:0},Za={key:1},Ta=(0,n._)("span",{class:"pagination-ellipsis"},"…",-1),Ja=[Ta],za={key:2},Ia={key:3},Ha={key:4},Fa=(0,n._)("span",{class:"pagination-ellipsis"},"…",-1),Wa=[Fa],Ua={key:5};function xa(e,a,t,s,r,o){return(0,n.wg)(),(0,n.iD)("nav",qa,[e.hasOnlyOnePage?((0,n.wg)(),(0,n.iD)("ul",Sa,[(0,n._)("li",null,[(0,n._)("a",{class:"pagination-link mt-2 is-current",onClick:a[0]||(a[0]=a=>e.updatePage(1))},"1")])])):((0,n.wg)(),(0,n.iD)("ul",Da,[e.hasPreviousPage&&e.isPreviousPageNotFirst?((0,n.wg)(),(0,n.iD)("li",Na,[(0,n._)("a",{class:"pagination-link mt-2",onClick:a[1]||(a[1]=a=>e.updatePage(1))}," 1")])):(0,n.kq)("",!0),e.hasPreviousPage&&e.isPreviousPageNotFirst?((0,n.wg)(),(0,n.iD)("li",Za,Ja)):(0,n.kq)("",!0),e.hasPreviousPage?((0,n.wg)(),(0,n.iD)("li",za,[(0,n._)("a",{class:"pagination-link mt-2",onClick:a[2]||(a[2]=a=>e.updatePage(e.currentPage-1))},(0,$.zw)(e.currentPage-1),1)])):(0,n.kq)("",!0),(0,n._)("li",null,[(0,n._)("a",{class:"pagination-link mt-2 is-current",onClick:a[3]||(a[3]=a=>e.updatePage(e.currentPage))},(0,$.zw)(e.currentPage),1)]),e.hasNextPage?((0,n.wg)(),(0,n.iD)("li",Ia,[(0,n._)("a",{class:"pagination-link mt-2",onClick:a[4]||(a[4]=a=>e.updatePage(e.currentPage+1))},(0,$.zw)(e.currentPage+1),1)])):(0,n.kq)("",!0),e.hasNextPage&&e.isNextPageNotLast?((0,n.wg)(),(0,n.iD)("li",Ha,Wa)):(0,n.kq)("",!0),e.hasNextPage&&e.isNextPageNotLast?((0,n.wg)(),(0,n.iD)("li",Ua,[(0,n._)("a",{class:"pagination-link mt-2",onClick:a[5]||(a[5]=a=>e.updatePage(e.totalPageCount))},(0,$.zw)(e.totalPageCount),1)])):(0,n.kq)("",!0)]))])}var Ca=(0,n.aZ)({name:"PaginationItem",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["update-page"],setup(e,a){const t=(0,D.yj)(),s=(0,D.tv)(),r={route:t,router:s},o=(0,n.Fl)((()=>Math.ceil(e.total/e.pageSize))),i=(0,n.Fl)((()=>1===o.value)),l=(0,n.Fl)((()=>e.currentPage>1)),u=(0,n.Fl)((()=>e.currentPage-1!==1)),c=(0,n.Fl)((()=>e.currentPage<o.value)),d=(0,n.Fl)((()=>e.currentPage+1!==o.value)),p=e=>{const t=(0,aa.K)("page",e.toString(),r);t.value=e.toString(),a.emit("update-page",e)};return(0,n.bv)((()=>{const a=(0,aa.K)("page",null,r);a.value&&parseInt(a.value)!==e.currentPage&&p(parseInt(a.value))})),{updatePage:p,hasNextPage:c,hasOnlyOnePage:i,hasPreviousPage:l,isNextPageNotLast:d,isPreviousPageNotFirst:u,totalPageCount:o}}});const Oa=(0,k.Z)(Ca,[["render",xa]]);var Va=Oa;const Qa={key:0},Ra=(0,n._)("p",null,"-",-1),Ya=[Ra],Ma={key:1};function Aa(e,a,t,s,r,o){return void 0===e.dt?((0,n.wg)(),(0,n.iD)("div",Qa,Ya)):((0,n.wg)(),(0,n.iD)("div",Ma,[(0,n._)("p",null,(0,$.zw)(e.getLocalDatetime(e.dt)),1),(0,n._)("p",null,"("+(0,$.zw)(e.getHumanizedRelativeTime(e.dt))+")",1)]))}var Ka=t(5743),La=t.n(Ka),Ea=t(893),Ga=t.n(Ea),Ba=t(9311),$a=t.n(Ba),Xa=t(922),et=t.n(Xa);function at(e){return La()(e).local().format("YYYY-MM-DD HH:mm:ss")}function tt(e){return La()(e).local().fromNow()}La().extend(Ga()),La().extend($a()),La().extend(et());var st=(0,n.aZ)({name:"ReadableDatetimeItem",props:{dt:{type:String,required:!1}},setup(){return{getHumanizedRelativeTime:tt,getLocalDatetime:at}}});const nt=(0,k.Z)(st,[["render",Aa]]);var rt=nt,ot=(0,n.aZ)({name:"JobsItem",components:{Pagination:Va,ReadableDatetime:rt,Status:ya,Success:ja},props:{jobs:{type:Object,required:!0}},emits:["update-page","refresh-page"],setup(e,a){const t=e=>{a.emit("update-page",e)},s=()=>{a.emit("refresh-page")};return{updatePage:t,refreshPage:s}}});const it=(0,k.Z)(ot,[["render",ba]]);var lt=it;const ut={class:"has-text-centered"},ct=(0,n._)("div",{class:"fa-3x"},[(0,n._)("i",{class:"fas fa-spinner fa-spin"})],-1),dt=[ct];function pt(e,a,t,s,r,o){return(0,n.wg)(),(0,n.iD)("div",ut,dt)}var gt=(0,n.aZ)({name:"LoadingItem"});const mt=(0,k.Z)(gt,[["render",pt]]);var vt=mt,bt=(0,n.aZ)({name:"JobsWrapper",components:{Loading:vt,ErrorMessage:le,Form:la,Jobs:lt},setup(){const e=(0,Q.iH)(1),a=(0,Q.iH)(),t=(0,R.KP)((async(e,a)=>await B.getJobs(a))),s=async()=>{const e=a.value?.getSearchParams();return await t.perform(e)},r=a=>{e.value=a},o=()=>{e.value=1},i=async()=>{o(),await s()},l=async()=>{o(),(0,n.Y3)((async()=>await s()))};return(0,n.bv)((async()=>{await s()})),(0,n.YP)(e,(async()=>{(0,n.Y3)((async()=>await s()))})),{getJobsTask:t,page:e,form:a,search:l,refreshPage:i,updatePage:r}}});const _t=(0,k.Z)(bt,[["render",V]]);var ft=_t,wt=(0,n.aZ)({name:"JobsView",components:{Jobs:ft},setup(){(0,n.bv)((()=>{(0,Z.ZQf)("Jobs - ARQ Dashboard")}))}});const yt=(0,k.Z)(wt,[["render",N]]);var kt=yt;function ht(e,a,t,s,r,o){const i=(0,n.up)("Job");return(0,n.wg)(),(0,n.j4)(i,{jobId:e.jobId},null,8,["jobId"])}function Pt(e,a,t,s,r,o){const i=(0,n.up)("Loading"),l=(0,n.up)("ErrorMessage"),u=(0,n.up)("JobComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.getJobTask.isRunning?((0,n.wg)(),(0,n.j4)(i,{key:0})):(0,n.kq)("",!0),e.getJobTask.isError?((0,n.wg)(),(0,n.j4)(l,{key:1,error:e.getJobTask.last?.error},null,8,["error"])):(0,n.kq)("",!0),e.getJobTask.last?.value?((0,n.wg)(),(0,n.j4)(u,{key:2,job:e.getJobTask.last.value},null,8,["job"])):(0,n.kq)("",!0)],64)}const jt={class:"is-size-2 mb-4"},qt={class:"wrapper"};function St(e,a,t,s,r,o){const i=(0,n.up)("VueJsonPretty");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("h2",jt,(0,$.zw)(e.job.jobId),1),(0,n._)("div",qt,[(0,n.Wm)(i,{data:e.job},null,8,["data"])])],64)}var Dt=(0,n.aZ)({name:"JobItem",components:{VueJsonPretty:re()},props:{job:{type:Object,required:!0}}});const Nt=(0,k.Z)(Dt,[["render",St],["__scopeId","data-v-60953757"]]);var Zt=Nt,Tt=(0,n.aZ)({name:"JobWrapper",components:{Loading:vt,ErrorMessage:le,JobComponent:Zt},props:{jobId:{type:String,required:!0}},setup(e){const a=(0,R.KP)((async(e,a)=>await B.getJob(a)));return(0,n.bv)((async()=>{await a.perform(e.jobId)})),{getJobTask:a}}});const Jt=(0,k.Z)(Tt,[["render",Pt]]);var zt=Jt,It=(0,n.aZ)({name:"ArtifactView",components:{Job:zt},props:{id:{type:String,required:!0}},setup(e){const a=(0,Q.iH)(e.id),t=()=>{(0,Z.ZQf)(`Job:${a.value} - ARQ Dashboard`)};return(0,n.bv)((()=>{t()})),(0,n.m0)((()=>{a.value=e.id,t()})),{jobId:a}}});const Ht=(0,k.Z)(It,[["render",ht]]);var Ft=Ht;function Wt(e,a,t,s,r,o){const i=(0,n.up)("Setting");return(0,n.wg)(),(0,n.j4)(i)}function Ut(e,a,t,s,r,o){const i=(0,n.up)("Setting");return(0,n.wg)(),(0,n.j4)(i,{queueNames:e.getQueueNamesTask.last?.value||[]},null,8,["queueNames"])}const xt={class:"box"},Ct={class:"field"},Ot=(0,n._)("label",{class:"label"},"ARQ queue name",-1),Vt={class:"control"},Qt={class:"select"};function Rt(e,a,t,r,o,i){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",xt,[(0,n._)("div",Ct,[Ot,(0,n._)("div",Vt,[(0,n._)("div",Qt,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.queue=a),onChange:a[1]||(a[1]=(...a)=>e.updateSetting&&e.updateSetting(...a))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.queueNames,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.name},(0,$.zw)(e.name),1)))),128))],544),[[s.bM,e.queue]])])])])])])}var Yt=(0,n.aZ)({name:"SettingItem",props:{queueNames:{type:Array,required:!0}},setup(){const e=K(),a=(0,Q.iH)(e.value.queue),t=()=>{e.value.queue=a.value,G()};return{queue:a,updateSetting:t}}});const Mt=(0,k.Z)(Yt,[["render",Rt]]);var At=Mt,Kt=(0,n.aZ)({name:"SettingWrapper",components:{Setting:At},setup(){const e=(0,R.KP)((async()=>await B.getQueueNames()));return(0,n.bv)((async()=>{await e.perform()})),{getQueueNamesTask:e}}});const Lt=(0,k.Z)(Kt,[["render",Ut]]);var Et=Lt,Gt=(0,n.aZ)({name:"SettingView",components:{Setting:Et},setup(){(0,n.bv)((()=>{(0,Z.ZQf)("Setting - ARQ Dashboard")}))}});const Bt=(0,k.Z)(Gt,[["render",Wt]]);var $t=Bt;function Xt(e,a,t,s,r,o){const i=(0,n.up)("Stats");return(0,n.wg)(),(0,n.j4)(i)}const es={key:2},as={class:"columns"},ts={class:"column"},ss={class:"field is-grouped is-grouped-centered"},ns={class:"control"},rs=(0,n._)("span",{class:"icon is-small"},[(0,n._)("i",{class:"fas fa-sync"})],-1),os=(0,n._)("span",null,"Update",-1),is=[rs,os];function ls(e,a,t,s,r,o){const i=(0,n.up)("Loading"),l=(0,n.up)("StatsComponent"),u=(0,n.up)("ErrorMessage");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.getStatsTask.isRunning?((0,n.wg)(),(0,n.j4)(i,{key:0})):(0,n.kq)("",!0),e.getStatsTask.last?.value?((0,n.wg)(),(0,n.j4)(l,{key:1,stats:e.getStatsTask.last.value},null,8,["stats"])):(0,n.kq)("",!0),e.updatedAt?((0,n.wg)(),(0,n.iD)("div",es,[(0,n._)("div",as,[(0,n._)("div",ts,[(0,n._)("div",ss,[(0,n._)("p",ns,[(0,n._)("a",{class:"button is-light",onClick:a[0]||(a[0]=(...a)=>e.update&&e.update(...a))},is)])]),(0,n._)("p",null," Updated at: "+(0,$.zw)(e.getLocalDatetime(e.updatedAt))+" ("+(0,$.zw)(e.getHumanizedRelativeTime(e.updatedAt))+") ",1)])])])):(0,n.kq)("",!0),e.getStatsTask.isError?((0,n.wg)(),(0,n.j4)(u,{key:3,error:e.getStatsTask.last?.error},null,8,["error"])):(0,n.kq)("",!0)],64)}const us={class:"is-size-2 mb-4"},cs={class:"columns"},ds={class:"column"},ps={class:"message"},gs=(0,n._)("div",{class:"message-header"},[(0,n._)("p",null,"Queued jobs")],-1),ms={class:"message-body has-text-centered"},vs={class:"column"},bs={class:"message is-info"},_s=(0,n._)("div",{class:"message-header"},[(0,n._)("p",null,"Deferred jobs")],-1),fs={class:"message-body has-text-centered"},ws={class:"column"},ys={class:"message is-link"},ks=(0,n._)("div",{class:"message-header"},[(0,n._)("p",null,"In progress jobs")],-1),hs={class:"message-body has-text-centered"},Ps={class:"column"},js={class:"message is-success"},qs=(0,n._)("div",{class:"message-header"},[(0,n._)("p",null,"Complete jobs")],-1),Ss={class:"message-body has-text-centered"};function Ds(e,a,t,s,r,o){const i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("h2",us,(0,$.zw)(e.state.queue),1),(0,n._)("div",cs,[(0,n._)("div",ds,[(0,n._)("article",ps,[gs,(0,n._)("div",ms,[(0,n.Wm)(i,{to:{name:"jobs",query:{status:"queued"}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.stats.queuedJobs),1)])),_:1})])])]),(0,n._)("div",vs,[(0,n._)("article",bs,[_s,(0,n._)("div",fs,[(0,n.Wm)(i,{to:{name:"jobs",query:{status:"deferred"}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.stats.deferredJobs),1)])),_:1})])])]),(0,n._)("div",ws,[(0,n._)("article",ys,[ks,(0,n._)("div",hs,[(0,n.Wm)(i,{to:{name:"jobs",query:{status:"in_progress"}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.stats.inProgressJobs),1)])),_:1})])])]),(0,n._)("div",Ps,[(0,n._)("article",js,[qs,(0,n._)("div",Ss,[(0,n.Wm)(i,{to:{name:"jobs",query:{status:"complete"}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.stats.completeJobs),1)])),_:1})])])])])],64)}var Ns=(0,n.aZ)({name:"StatsItem",props:{stats:{type:Object,required:!0}},setup(){const e=K();return{state:e}}});const Zs=(0,k.Z)(Ns,[["render",Ds]]);var Ts=Zs,Js=(0,n.aZ)({name:"StatsWrapper",components:{Loading:vt,ErrorMessage:le,StatsComponent:Ts},setup(){const e=(0,R.KP)((async()=>await B.getStats())),a=(0,Q.iH)(void 0),t=async()=>{await e.perform(),a.value=(new Date).toISOString()};return(0,n.bv)((async()=>{await t()})),{getStatsTask:e,updatedAt:a,update:t,getHumanizedRelativeTime:tt,getLocalDatetime:at}}});const zs=(0,k.Z)(Js,[["render",ls]]);var Is=zs,Hs=(0,n.aZ)({name:"StatsView",components:{Stats:Is},setup(){(0,n.bv)((()=>{(0,Z.ZQf)("Stats - ARQ Dashboard")}))}});const Fs=(0,k.Z)(Hs,[["render",Xt]]);var Ws=Fs;const Us=[{path:"/",name:"stats",component:Ws},{path:"/jobs/:id",name:"job",component:Ft,props:!0},{path:"/jobs/",name:"jobs",component:kt},{path:"/setting/",name:"setting",component:$t}],xs=(0,D.p7)({history:(0,D.r5)("/"),routes:Us});var Cs=xs;(0,s.ri)(S).use(Cs).mount("#app")}},a={};function t(s){var n=a[s];if(void 0!==n)return n.exports;var r=a[s]={exports:{}};return e[s].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,s,n,r){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],r=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(t.O).every((function(e){return t.O[e](s[l])}))?s.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var u=n();void 0!==u&&(a=u)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,n,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(a){return 0===e[a]};var a=function(a,s){var n,r,o=s[0],i=s[1],l=s[2],u=0;if(o.some((function(a){return 0!==e[a]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(l)var c=l(t)}for(a&&a(s);u<o.length;u++)r=o[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},s=self["webpackChunkarq_dashboard_frontend"]=self["webpackChunkarq_dashboard_frontend"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[998],(function(){return t(2524)}));s=t.O(s)})();
//# sourceMappingURL=app.d07a7e2b.js.map